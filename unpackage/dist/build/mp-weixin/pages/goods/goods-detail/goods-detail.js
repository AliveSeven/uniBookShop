(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods-detail/goods-detail"],{3768:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=o(e("a34a"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t,n,e,u,o,r,i){try{var a=t[r](i),c=a.value}catch(s){return void e(s)}a.done?n(c):Promise.resolve(c).then(u,o)}function i(t){return function(){var n=this,e=arguments;return new Promise((function(u,o){var i=t.apply(n,e);function a(t){r(i,u,o,a,c,"next",t)}function c(t){r(i,u,o,a,c,"throw",t)}a(void 0)}))}}var a={data:function(){return{goods:{},likeGoods:{},tabsList:[{name:"商品详情"},{name:"商品评论",count:0},{name:"推荐商品"}],tabsCurrent:0,commentList:{},goodsId:null,collectNum:0,cartNum:0}},onLoad:function(t){this.goodsId=t.id,this.getBooksInfo(),this.cartLen()},methods:{getBooksInfo:function(){var t=this;return i(u.default.mark((function n(){var e;return u.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$u.api.getGoodsDetail(t.goodsId);case 2:e=n.sent,t.goods=e.goods,t.likeGoods=e.like_goods,t.collectNum=e.goods.is_collect,t.commentList=e.goods.comments,t.tabsList[1].count=e.goods.comments.length,console.log(e);case 9:case"end":return n.stop()}}),n)})))()},tabsChange:function(t){this.tabsCurrent=t},collect:function(){this.$u.throttle(this.collectNot,1500)},collectNot:function(){var t=this;return i(u.default.mark((function n(){return u.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.$u.utils.isLogin()){n.next=3;break}n.next=7;break;case 3:return t.collectNum?t.$u.toast("取消收藏成功"):t.$u.toast("收藏成功"),t.collectNum=!t.collectNum,n.next=7,t.$u.api.isCollect(t.goodsId);case 7:case"end":return n.stop()}}),n)})))()},addCart:function(){var t=this;return i(u.default.mark((function n(){var e;return u.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.$u.utils.isLogin()){n.next=3;break}n.next=9;break;case 3:return t.$u.toast("添加购物车成功！"),t.cartNum++,e={goods_id:t.goodsId},n.next=8,t.$u.api.addCart(e);case 8:n.sent;case 9:case"end":return n.stop()}}),n)})))()},cartLen:function(){var t=this;return i(u.default.mark((function n(){var e;return u.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.vuex_token){n.next=5;break}return n.next=3,t.$u.api.cartGoods();case 3:e=n.sent,t.cartNum=e.data.reduce((function(t,n){return parseInt(t)+parseInt(n.num)}),0);case 5:case"end":return n.stop()}}),n)})))()},toCart:function(){this.$u.utils.isLogin()&&this.$u.route({type:"switchTab",url:"pages/cart/cart"})}}};n.default=a},5333:function(t,n,e){"use strict";e.r(n);var u=e("3768"),o=e.n(u);for(var r in u)"default"!==r&&function(t){e.d(n,t,(function(){return u[t]}))}(r);n["default"]=o.a},"604d":function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return r})),e.d(n,"a",(function(){return u}));var u={uTabs:function(){return e.e("uview-ui/components/u-tabs/u-tabs").then(e.bind(null,"9f08"))},uParse:function(){return Promise.all([e.e("common/vendor"),e.e("uview-ui/components/u-parse/u-parse")]).then(e.bind(null,"896a"))},uIcon:function(){return e.e("uview-ui/components/u-icon/u-icon").then(e.bind(null,"2b22"))},uEmpty:function(){return e.e("uview-ui/components/u-empty/u-empty").then(e.bind(null,"8bd9"))},uRow:function(){return e.e("uview-ui/components/u-row/u-row").then(e.bind(null,"bf2b"))},uCol:function(){return e.e("uview-ui/components/u-col/u-col").then(e.bind(null,"80aa"))},uImage:function(){return e.e("uview-ui/components/u-image/u-image").then(e.bind(null,"bd6a"))},uBadge:function(){return e.e("uview-ui/components/u-badge/u-badge").then(e.bind(null,"7eaf"))},uButton:function(){return e.e("uview-ui/components/u-button/u-button").then(e.bind(null,"7ee8"))},uLoading:function(){return e.e("uview-ui/components/u-loading/u-loading").then(e.bind(null,"bbb2"))}},o=function(){var t=this,n=t.$createElement,e=(t._self._c,Object.keys(t.goods));t.$mp.data=Object.assign({},{$root:{g0:e}})},r=[]},"699b":function(t,n,e){"use strict";(function(t){e("6e59");u(e("66fd"));var n=u(e("93b9"));function u(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(n.default)}).call(this,e("543d")["createPage"])},"778c":function(t,n,e){},"93b9":function(t,n,e){"use strict";e.r(n);var u=e("604d"),o=e("5333");for(var r in o)"default"!==r&&function(t){e.d(n,t,(function(){return o[t]}))}(r);e("9c18");var i,a=e("f0c5"),c=Object(a["a"])(o["default"],u["b"],u["c"],!1,null,"0e9d9f55",null,!1,u["a"],i);n["default"]=c.exports},"9c18":function(t,n,e){"use strict";var u=e("778c"),o=e.n(u);o.a}},[["699b","common/runtime","common/vendor"]]]);